/* ===== Version r9-divtable =====
 * - เปลี่ยน workspace ตารางคูณ/หารเป็นโครงสร้าง div (display:table/row/cell)
 * - ปรับ responsive กับจอมือถือแนวนอน
 * - เพิ่มขนาดตัวอักษรของ select เมนูให้เท่าปุ่ม
 */

:root{
  --purple:#6b21a8; --purple-2:#7c3aed; --ink:#111827; --line:#e5e7eb;
  --blue:#4A7BD9; --green:#4CAF50; --red:#C91C1C; --yellow:#F6D267;
  --grid:#d8dbe2;
}

*{box-sizing:border-box}
html,body{height:100%;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:#111;
  font-size:18px;
  /* พื้นหลังเป็นเส้นกริดอ่อน */
  background-size:40px 40px;
  background-image:
    linear-gradient(to right, var(--grid) 1px, transparent 1px),
    linear-gradient(to bottom, var(--grid) 1px, transparent 1px);
}

.toolbar{
  position:sticky;top:0;z-index:10;
  display:flex;align-items:center;gap:.6rem;
  padding:.6rem .9rem;background:var(--purple);color:#fff
}
.brand{font-size:.9rem} /* ลดครึ่งหนึ่งตามที่เคยขอ */
.btn{
  border:0;border-radius:.7rem;padding:.55rem 1rem;
  background:linear-gradient(180deg,#bbd0ff,#b8c0ff);color:#000;cursor:pointer;
  font-size:1.05rem
}
.btn:hover{filter:brightness(.96)}
.help-btn{margin-left:auto}

/* ขนาดตัวอักษรของ select ให้พอๆ กับปุ่ม */
.menu-select{
  font-size:1.05rem; padding:.5rem .6rem; border-radius:.7rem; border:0;
}

.row{display:flex;align-items:center;gap:.6rem;padding:.7rem .9rem;border-bottom:1px solid var(--line);flex-wrap:wrap;font-size:1.2rem;background:#fff}
.row .lbl{font-weight:700}
.row .prob{font-size:1.35rem}
.row .eq{font-size:1.35rem;margin-left:.6rem}
.row input[type=text]{font-size:1.1rem;padding:.5rem .65rem;border:1px solid var(--line);border-radius:.5rem;min-width:18rem;background:#fff;color:#111}
.row .btn-inline{background:#f3f4f6;color:#111;border:1px solid var(--line)}
.solution{margin-left:.6rem}
.reformat{flex:1;min-width:260px}

.wrap{display:flex;min-height:calc(100vh - 110px);}
.palette{width:220px;border-right:1px solid var(--line);padding:12px;background:#f9fafb}
.pal-title{font-weight:700;margin-bottom:.4rem}
.pal-item{display:flex;align-items:center;gap:.6rem;padding:.6rem;border:1px solid var(--line);border-radius:.5rem;background:#fff;margin-bottom:.6rem;cursor:grab;font-size:1.05rem}
.pal-chip{border:2px solid #222;border-radius:6px}
.chip-x2{width:24px;height:24px;background:var(--blue)}
.chip-negx2{width:24px;height:24px;background:var(--red)}
.chip-x{width:48px;height:24px;background:var(--green)}
.chip-negx{width:48px;height:24px;background:var(--red)}
.chip-one{width:18px;height:18px;background:var(--yellow)}
.chip-negone{width:18px;height:18px;background:var(--red)}
.pal-note{font-size:1rem;color:#6b7280}

.board-wrap{position:relative;flex:1;overflow:hidden;background:transparent}
.board{position:absolute;inset:0;transform-origin:0 0; touch-action: none;} /* ล็อกท่าทางบนกระดาน */
.grid{display:none} /* ใช้ background ของ body แล้ว */

.tile{position:absolute;border:2px solid #222;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;user-select:none;color:#000; touch-action: none;}
.tile span{pointer-events:none}
.selected{outline:3px solid var(--purple-2)}
.sel-rect{position:absolute;border:2px dashed var(--purple-2);background:rgba(124,58,237,.1)}

.ws{position:absolute;left:40px;top:40px;right:40px;bottom:40px;border:3px solid #cbd5e1;background:#f8fafc;border-radius:10px;display:none;}
.ws .midline{position:absolute;top:20px;bottom:20px;left:50%;width:3px;background:#94a3b8}

/* ===== div-based table (2x2) ===== */
.table-like{position:absolute;left:40px;top:80px;right:40px;bottom:40px;border:3px solid #94a3b8;border-radius:8px;background:#fff;display:table;width:calc(100% - 80px);height:calc(100% - 120px);table-layout:fixed}
.table-row{display:table-row}
.cell{display:table-cell;border:1px solid #cbd5e1;vertical-align:middle;text-align:center;font-weight:700;font-size:1.1rem;padding:.4rem .5rem;overflow:hidden;text-overflow:ellipsis}
.cell input{font-size:1.1rem;padding:.4rem .5rem;border:1px solid #cbd5e1;border-radius:.4rem;min-width:100px;max-width:100%;width:100%;background:#fff;color:#111}
.cell-op{width:180px}

/* Popup */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:40}
.card{position:relative;background:#fff;border-radius:14px;max-width:780px;width:96%;padding:16px}
.close-x{position:absolute;right:8px;top:8px;background:#ef4444;border:none;color:#fff;border-radius:999px;width:34px;height:34px;cursor:pointer;font-weight:800}
.help-title{font-weight:800;margin-bottom:.4rem}
.help-list{margin:.3rem 1rem;font-size:1.05rem}
.video-wrap{position:relative;padding-top:56.25%;margin-top:.5rem}
.video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
.credit{font-size:1rem;color:#374151;margin-top:.6rem;text-align:center}
.contact-row{display:flex;justify-content:center;margin-top:.6rem}
.contact{display:inline-block}

/* ===== Responsive ===== */
/* จอเล็ก: วาง palette ลงล่าง, workspace สูงพอใช้งาน และเซลล์ไม่ล้น */
@media (max-width: 900px){
  .wrap{flex-direction:column}
  .palette{width:100%; order:2}
  .board-wrap{order:1; min-height:58vh}
  .cell{font-size:1rem}
  .cell-op{width:140px}
}
@media (max-width: 600px){
  .row input[type=text]{min-width:12rem}
  .cell-op{width:120px}
  .table-like{left:16px;right:16px}
}
